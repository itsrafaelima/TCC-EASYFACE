<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EASYFACE - Interface Acess√≠vel</title>
    <link rel="stylesheet" href="estilos.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üñ•Ô∏è EASYFACE</h1>
            <p>Controle seu computador sem mouse - Use teclado, voz ou comandos especiais</p>
        </div>

        <div class="status-bar">
            <div class="voice-status">
                <div class="voice-indicator"></div>
                <span>Sistema de Voz: Ativo</span>
            </div>
            <div>Modo: Navega√ß√£o por Teclado</div>
        </div>

        <div class="main-grid">
            <div class="panel">
                <h2>‚å®Ô∏è Controles por Teclado</h2>
                <div class="command-grid">
                    <button class="command-btn" tabindex="1" onclick="executeCommand('open-menu')">
                        Menu Principal<br><small>Alt + M</small>
                    </button>
                    <button class="command-btn" tabindex="2" onclick="executeCommand('open-file')">
                        Abrir Arquivo<br><small>Ctrl + O</small>
                    </button>
                    <button class="command-btn" tabindex="3" onclick="executeCommand('switch-window')">
                        Trocar Janela<br><small>Alt + Tab</small>
                    </button>
                    <button class="command-btn" tabindex="4" onclick="executeCommand('minimize')">
                        Minimizar<br><small>Win + M</small>
                    </button>
                </div>
                <div class="keyboard-nav">
                    <h3>Navega√ß√£o Ativa:</h3>
                    <div class="key-display">
                        <span class="key">Tab</span>
                        <span class="key">Enter</span>
                        <span class="key">Setas</span>
                        <span class="key">Esc</span>
                        <span class="key">Espa√ßo</span>
                    </div>
                </div>
            </div>

            <div class="panel">
                <h2>üé§ Comandos de Voz</h2>
                <div class="voice-commands">
                    <div class="voice-list">
                        <div class="voice-item">
                            <strong>"Abrir navegador"</strong> - Inicia o navegador web
                        </div>
                        <div class="voice-item">
                            <strong>"Digitar texto"</strong> - Ativa ditado por voz
                        </div>
                        <div class="voice-item">
                            <strong>"Fechar janela"</strong> - Fecha a janela ativa
                        </div>
                        <div class="voice-item">
                            <strong>"Aumentar volume"</strong> - Controla audio do sistema
                        </div>
                        <div class="voice-item">
                            <strong>"Pausar m√∫sica"</strong> - Controla reprodu√ß√£o
                        </div>
                        <div class="voice-item">
                            <strong>"Ler tela"</strong> - Ativa leitor de tela
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="accessibility-tools">
            <div class="tool-card">
                <div class="tool-icon">üëÅÔ∏è</div>
                <h3>Leitor de Tela</h3>
                <p>Converte texto em fala para navega√ß√£o auditiva</p>
                <button class="command-btn" onclick="toggleScreenReader()">Ativar/Desativar</button>
            </div>

            <div class="tool-card">
                <div class="tool-icon">üîç</div>
                <h3>Lupa Virtual</h3>
                <p>Amplia elementos da tela para melhor visualiza√ß√£o</p>
                <button class="command-btn" onclick="toggleMagnifier()">Ativar Zoom</button>
            </div>

            <div class="tool-card">
                <div class="tool-icon">‚å®Ô∏è</div>
                <h3>Teclado Virtual</h3>
                <p>Teclado na tela para entrada de texto</p>
                <button class="command-btn" onclick="showVirtualKeyboard()">Mostrar Teclado</button>
            </div>

            <div class="tool-card">
                <div class="tool-icon">üëÜ</div>
                <h3>Controle por Olhar</h3>
                <p>Simula cliques atrav√©s do movimento dos olhos</p>
                <button class="command-btn" onclick="toggleEyeTracking()">Calibrar</button>
            </div>
        </div>

        <div class="feedback-area">
            <h2>üí¨ √Årea de Feedback</h2>
            <div class="output-display" id="outputDisplay">
                > Sistema iniciado. Aguardando comandos...<br>
                > Use Tab para navegar, Enter para ativar, Esc para sair<br>
                > Diga "Ajuda" para ver todos os comandos de voz<br>
            </div>
            <div class="input-area">
                <input type="text" class="voice-input" placeholder="Digite um comando ou use comando de voz..." id="commandInput">
                <button class="command-btn" onclick="processCommand()">Executar</button>
                <button class="command-btn" onclick="startVoiceRecognition()">üé§ Falar</button>
            </div>
        </div>

        <div class="help-text">
            <strong>üí° Dicas de Acessibilidade:</strong><br>
            ‚Ä¢ Use Tab e Shift+Tab para navegar entre elementos<br>
            ‚Ä¢ Pressione Enter ou Espa√ßo para ativar bot√µes<br>
            ‚Ä¢ Use as setas do teclado para navegar em listas<br>
            ‚Ä¢ Comandos de voz funcionam em portugu√™s brasileiro<br>
            ‚Ä¢ Todas as fun√ß√µes t√™m atalhos de teclado alternativos
        </div>
    </div>

    <script>
        let isScreenReaderActive = false;
        let isVoiceRecognitionActive = false;
        const outputDisplay = document.getElementById('outputDisplay');
        const commandInput = document.getElementById('commandInput');

        // Simula feedback para comandos
        function executeCommand(command) {
            const messages = {
                'open-menu': 'Menu principal aberto. Use as setas para navegar.',
                'open-file': 'Di√°logo de abertura de arquivo ativado.',
                'switch-window': 'Alternando entre janelas abertas.',
                'minimize': 'Janela minimizada.'
            };
            
            addOutput(`> ${messages[command] || 'Comando executado'}`);
            
            // Simula ativa√ß√£o visual da tecla
            const keys = document.querySelectorAll('.key');
            keys.forEach(key => {
                key.classList.add('active');
                setTimeout(() => key.classList.remove('active'), 300);
            });
        }

        function addOutput(message) {
            outputDisplay.innerHTML += message + '<br>';
            outputDisplay.scrollTop = outputDisplay.scrollHeight;
        }

        function processCommand() {
            const command = commandInput.value.trim().toLowerCase();
            if (command) {
                addOutput(`> Comando recebido: "${command}"`);
                
                // Simula processamento de comandos comuns
                if (command.includes('abrir')) {
                    addOutput('> Abrindo aplicativo...');
                } else if (command.includes('fechar')) {
                    addOutput('> Fechando janela atual...');
                } else if (command.includes('ajuda')) {
                    addOutput('> Comandos dispon√≠veis: abrir, fechar, navegar, ler, digitar');
                } else {
                    addOutput('> Comando n√£o reconhecido. Diga "ajuda" para ver op√ß√µes.');
                }
                
                commandInput.value = '';
            }
        }

        function toggleScreenReader() {
            isScreenReaderActive = !isScreenReaderActive;
            addOutput(`> Leitor de tela ${isScreenReaderActive ? 'ativado' : 'desativado'}`);
        }

        function toggleMagnifier() {
            addOutput('> Lupa virtual ativada. Use Ctrl + roda do mouse para ajustar zoom.');
        }

        function showVirtualKeyboard() {
            addOutput('> Teclado virtual exibido na parte inferior da tela.');
        }

        function toggleEyeTracking() {
            addOutput('> Iniciando calibra√ß√£o do controle por olhar. Siga as instru√ß√µes na tela.');
        }

        // Vari√°veis para reconhecimento de voz real
        let recognition = null;
        let isListening = false;

        // Inicializar Web Speech API
        function initializeSpeechRecognition() {
            if ('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
            } else if ('SpeechRecognition' in window) {
                recognition = new SpeechRecognition();
            } else {
                addOutput('> ‚ùå Reconhecimento de voz n√£o suportado neste navegador');
                addOutput('> Use Chrome, Edge ou Safari para melhor compatibilidade');
                return false;
            }

            recognition.lang = 'pt-BR';
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;

            recognition.onstart = function() {
                addOutput('> üé§ Microfone ativado - Fale agora!');
                isListening = true;
                updateMicrophoneStatus(true);
            };

            recognition.onend = function() {
                addOutput('> üîá Microfone desativado');
                isListening = false;
                updateMicrophoneStatus(false);
            };

            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript.toLowerCase();
                addOutput(`> üó£Ô∏è Voc√™ disse: "${transcript}"`);
                processVoiceCommand(transcript);
            };

            recognition.onerror = function(event) {
                addOutput(`> ‚ùå Erro no reconhecimento: ${event.error}`);
                if (event.error === 'not-allowed') {
                    addOutput('> ‚ö†Ô∏è Permiss√£o do microfone negada!');
                    addOutput('> Clique no √≠cone do microfone na barra do navegador e permita o acesso');
                }
                isListening = false;
                updateMicrophoneStatus(false);
            };

            return true;
        }

        function startVoiceRecognition() {
            if (!recognition && !initializeSpeechRecognition()) {
                return;
            }

            if (isListening) {
                recognition.stop();
                addOutput('> Parando reconhecimento de voz...');
            } else {
                addOutput('> Iniciando reconhecimento de voz...');
                addOutput('> üì¢ Comandos dispon√≠veis: "abrir navegador", "fechar janela", "ajuda", "parar"');
                try {
                    recognition.start();
                } catch (error) {
                    addOutput('> ‚ùå Erro ao iniciar reconhecimento: ' + error.message);
                }
            }
        }

        function processVoiceCommand(command) {
            // Processamento dos comandos de voz com instru√ß√µes reais
            if (command.includes('abrir navegador') || command.includes('abrir browser')) {
                addOutput('> üåê Comando: Abrir Navegador');
                addOutput('> üí° INSTRU√á√ïES REAIS:');
                addOutput('  ‚Ä¢ Windows: Pressione Win + R, digite "chrome" ou "firefox"');
                addOutput('  ‚Ä¢ Mac: Cmd + Espa√ßo, digite "Safari" ou "Chrome"');
                addOutput('  ‚Ä¢ Linux: Alt + F2, digite "firefox"');
                showRealCommand('Pressione Ctrl + T para nova aba no navegador atual');
                
            } else if (command.includes('fechar janela') || command.includes('fechar')) {
                addOutput('> ‚ùå Comando: Fechar Janela');
                addOutput('> üí° INSTRU√á√ïES REAIS:');
                addOutput('  ‚Ä¢ Atalho universal: Alt + F4 (Windows/Linux)');
                addOutput('  ‚Ä¢ Mac: Cmd + Q (fechar app) ou Cmd + W (fechar aba)');
                addOutput('  ‚Ä¢ Ou clique no X da janela');
                showRealCommand('Use Alt + F4 para fechar a janela atual');
                
            } else if (command.includes('abrir arquivo')) {
                addOutput('> üìÅ Comando: Abrir Arquivo');
                addOutput('> üí° INSTRU√á√ïES REAIS:');
                addOutput('  ‚Ä¢ Atalho: Ctrl + O na maioria dos programas');
                addOutput('  ‚Ä¢ Windows: Win + E para abrir Explorador de Arquivos');
                addOutput('  ‚Ä¢ Mac: Cmd + O ou Cmd + Espa√ßo + "Finder"');
                showRealCommand('Pressione Ctrl + O para abrir arquivo no programa atual');
                
            } else if (command.includes('trocar janela') || command.includes('alternar')) {
                addOutput('> üîÑ Comando: Trocar Janela');
                addOutput('> üí° INSTRU√á√ïES REAIS:');
                addOutput('  ‚Ä¢ Windows/Linux: Alt + Tab');
                addOutput('  ‚Ä¢ Mac: Cmd + Tab');
                addOutput('  ‚Ä¢ Windows: Win + Tab (visualiza√ß√£o de tarefas)');
                showRealCommand('Pressione Alt + Tab para alternar entre janelas');
                
            } else if (command.includes('minimizar')) {
                addOutput('> üìâ Comando: Minimizar Janela');
                addOutput('> üí° INSTRU√á√ïES REAIS:');
                addOutput('  ‚Ä¢ Windows: Win + M (minimizar todas) ou Win + D (mostrar desktop)');
                addOutput('  ‚Ä¢ Mac: Cmd + M');
                addOutput('  ‚Ä¢ Ou clique no bot√£o minimizar (-)');
                showRealCommand('Pressione Win + D para minimizar todas as janelas');
                
            } else if (command.includes('volume') || command.includes('audio')) {
                addOutput('> üîä Comando: Controle de Volume');
                addOutput('> üí° INSTRU√á√ïES REAIS:');
                addOutput('  ‚Ä¢ Windows: Teclas de volume do teclado ou Win + G');
                addOutput('  ‚Ä¢ Mac: Teclas F10, F11, F12 ou bot√µes de volume');
                addOutput('  ‚Ä¢ Linux: Alsamixer ou controles do sistema');
                showRealCommand('Use as teclas de volume do seu teclado');
                
            } else if (command.includes('calculadora')) {
                addOutput('> üî¢ Comando: Abrir Calculadora');
                addOutput('> üí° INSTRU√á√ïES REAIS:');
                addOutput('  ‚Ä¢ Windows: Win + R, digite "calc"');
                addOutput('  ‚Ä¢ Mac: Cmd + Espa√ßo, digite "Calculator"');
                addOutput('  ‚Ä¢ Linux: Alt + F2, digite "gnome-calculator"');
                tryOpenCalculator();
                
            } else if (command.includes('notepad') || command.includes('bloco de notas')) {
                addOutput('> üìù Comando: Abrir Editor de Texto');
                addOutput('> üí° INSTRU√á√ïES REAIS:');
                addOutput('  ‚Ä¢ Windows: Win + R, digite "notepad"');
                addOutput('  ‚Ä¢ Mac: Cmd + Espa√ßo, digite "TextEdit"');
                addOutput('  ‚Ä¢ Linux: Ctrl + Alt + T, digite "gedit"');
                
            } else if (command.includes('ajuda') || command.includes('help')) {
                addOutput('> üí° COMANDOS DE VOZ DISPON√çVEIS:');
                addOutput('  - "Abrir navegador" - Instru√ß√µes para abrir browser');
                addOutput('  - "Fechar janela" - Como fechar janelas');
                addOutput('  - "Abrir arquivo" - Abrir di√°logos de arquivo');
                addOutput('  - "Trocar janela" - Alternar entre programas');
                addOutput('  - "Minimizar" - Minimizar janelas');
                addOutput('  - "Volume" - Controlar √°udio');
                addOutput('  - "Calculadora" - Abrir calculadora');
                addOutput('  - "Notepad" - Abrir editor de texto');
                
            } else if (command.includes('parar') || command.includes('stop')) {
                recognition.stop();
                addOutput('> üõë Reconhecimento de voz parado por comando');
                
            } else if (command.includes('teste') || command.includes('test')) {
                addOutput('> ‚úÖ Teste do microfone: FUNCIONANDO!');
                addOutput('> üéâ Seu microfone est√° captando a voz corretamente');
                addOutput('> üí° Agora experimente outros comandos como "abrir navegador"');
                
            } else {
                addOutput(`> ‚ùì Comando n√£o reconhecido: "${command}"`);
                addOutput('> üí° Diga "ajuda" para ver comandos dispon√≠veis');
                addOutput('> üîß Ou experimente: "abrir navegador", "fechar janela", "calculadora"');
            }
        }

        // Fun√ß√£o para mostrar comando real na tela
        function showRealCommand(instruction) {
            const popup = document.createElement('div');
            popup.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 1000;
                background: #2d3748; color: white; padding: 15px 20px;
                border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);
                max-width: 300px; font-size: 14px; border-left: 4px solid #48bb78;
            `;
            popup.innerHTML = `<strong>‚å®Ô∏è Execute agora:</strong><br>${instruction}`;
            
            document.body.appendChild(popup);
            
            setTimeout(() => {
                popup.style.opacity = '0';
                popup.style.transition = 'opacity 0.5s';
                setTimeout(() => document.body.removeChild(popup), 500);
            }, 5000);
        }

        // Tentar abrir calculadora (funciona em alguns casos)
        function tryOpenCalculator() {
            // Tenta alguns m√©todos que podem funcionar dependendo do contexto
            try {
                // M√©todo 1: Protocolo personalizado (se configurado)
                window.open('calculator://', '_blank');
                addOutput('> üîß Tentando m√©todo 1...');
            } catch (e) {
                addOutput('> ‚ö†Ô∏è M√©todo autom√°tico n√£o dispon√≠vel');
            }
            
            // Instru√ß√£o manual sempre funciona
            showRealCommand('Pressione Win + R, digite "calc" e pressione Enter');
        }

        function updateMicrophoneStatus(active) {
            const indicator = document.querySelector('.voice-indicator');
            const statusText = document.querySelector('.voice-status span');
            
            if (active) {
                indicator.style.background = '#e53e3e';
                indicator.style.animation = 'pulse 0.5s infinite';
                statusText.textContent = 'Microfone: OUVINDO';
            } else {
                indicator.style.background = '#48bb78';
                indicator.style.animation = 'pulse 2s infinite';
                statusText.textContent = 'Sistema de Voz: Ativo';
            }
        }

        // Navega√ß√£o por teclado aprimorada
        document.addEventListener('keydown', function(e) {
            // Feedback visual para teclas pressionadas
            const keyDisplay = document.querySelector('.key-display');
            const pressedKey = document.createElement('span');
            pressedKey.className = 'key active';
            pressedKey.textContent = e.key;
            
            // Atalhos especiais
            if (e.altKey && e.key === 'm') {
                e.preventDefault();
                executeCommand('open-menu');
            } else if (e.ctrlKey && e.key === 'o') {
                e.preventDefault();
                executeCommand('open-file');
            }
            
            // Feedback de tecla pressionada
            addOutput(`> Tecla pressionada: ${e.key}`);
        });

        // Entrada por Enter no campo de comando
        commandInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                processCommand();
            }
        });

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            addOutput('> Interface acess√≠vel carregada com sucesso!');
            
            // Verificar suporte ao reconhecimento de voz
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                addOutput('> ‚úÖ Reconhecimento de voz suportado neste navegador');
                addOutput('> üé§ Clique no bot√£o "üé§ Falar" para testar o microfone');
            } else {
                addOutput('> ‚ùå Reconhecimento de voz n√£o suportado');
                addOutput('> üí° Use Chrome, Edge ou Safari para melhor experi√™ncia');
            }
            
            addOutput('> Todos os recursos de acessibilidade est√£o dispon√≠veis.');
            
            // Foco inicial no primeiro bot√£o
            document.querySelector('.command-btn').focus();
        });
    </script>
</body>
</html>