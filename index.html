<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EASYFACE - Interface Acess√≠vel</title>
    <link rel="stylesheet" href="estilos.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üñ•Ô∏è EASYFACE üñ•Ô∏è</h1>
            <p>Controle seu computador sem mouse - Use teclado, voz ou comandos especiais</p>
        </div>

        <div class="status-bar">
            <div class="voice-status">
                <div class="voice-indicator"></div>
                <span>Sistema de Voz: Ativo</span>
            </div>
            <div>Modo: Navega√ß√£o por Teclado</div>
        </div>

        <div class="main-grid">
            <div class="panel">
                <h2>‚å®Ô∏è Controles por Teclado</h2>
                <div class="command-grid">
                    <button class="command-btn" tabindex="1" onclick="executeCommand('open-menu')">
                        Menu Principal<br><small>Alt + M</small>
                    </button>
                    <button class="command-btn" tabindex="2" onclick="executeCommand('open-file')">
                        Abrir Arquivo<br><small>Ctrl + O</small>
                    </button>
                    <button class="command-btn" tabindex="3" onclick="executeCommand('switch-window')">
                        Trocar Janela<br><small>Alt + Tab</small>
                    </button>
                    <button class="command-btn" tabindex="4" onclick="executeCommand('minimize')">
                        Minimizar<br><small>Win + M</small>
                    </button>
                </div>
                <div class="keyboard-nav">
                    <h3>Navega√ß√£o Ativa:</h3>
                    <div class="key-display">
                        <span class="key">Tab</span>
                        <span class="key">Enter</span>
                        <span class="key">Setas</span>
                        <span class="key">Esc</span>
                        <span class="key">Espa√ßo</span>
                    </div>
                </div>
            </div>

            <div class="panel">
                <h2>üé§ Comandos de Voz</h2>
                <div class="voice-commands">
                    <div class="voice-list">
                        <div class="voice-item">
                            <strong>"Abrir navegador"</strong> - Inicia o navegador web
                        </div>
                        <div class="voice-item">
                            <strong>"Digitar texto"</strong> - Ativa ditado por voz
                        </div>
                        <div class="voice-item">
                            <strong>"Fechar janela"</strong> - Fecha a janela ativa
                        </div>
                        <div class="voice-item">
                            <strong>"Aumentar volume"</strong> - Controla audio do sistema
                        </div>
                        <div class="voice-item">
                            <strong>"Pausar m√∫sica"</strong> - Controla reprodu√ß√£o
                        </div>
                        <div class="voice-item">
                            <strong>"Ler tela"</strong> - Ativa leitor de tela
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="accessibility-tools">
            <div class="tool-card">
                <div class="tool-icon">üëÅÔ∏è</div>
                <h3>Leitor de Tela</h3>
                <br>
                <p>Converte texto em fala para navega√ß√£o auditiva</p>
                <br>
                <button class="command-btn" onclick="toggleScreenReader()">Ativar/Desativar</button>
            </div>

            <div class="tool-card">
                <div class="tool-icon">üîç</div>
                <h3>Lupa Virtual</h3>
                <br>
                <p>Amplia elementos da tela para melhor visualiza√ß√£o</p>
                <br>
                <button class="command-btn" onclick="toggleMagnifier()">Ativar Zoom</button>
            </div>

            <div class="tool-card">
                <div class="tool-icon">‚å®Ô∏è</div>
                <h3>Teclado Virtual</h3>
                <br>
                <p>Teclado na tela para entrada de texto</p>
                <br>
                <button class="command-btn" onclick="showVirtualKeyboard()">Mostrar Teclado</button>
            </div>
        </div>

        <div class="feedback-area">
            <h2>üí¨ √Årea de Feedback</h2>
            <div class="output-display" id="outputDisplay">
                > Sistema iniciado. Aguardando comandos...<br>
                > Use Tab para navegar, Enter para ativar, Esc para sair<br>
                > Diga "Ajuda" para ver todos os comandos de voz<br>
            </div>
            <div class="input-area">
                <input type="text" class="voice-input" placeholder="Digite um comando ou use comando de voz..." id="commandInput">
                <button class="command-btn" onclick="processCommand()">Executar</button>
                <button class="command-btn" onclick="startVoiceRecognition()">üé§ Falar</button>
            </div>
        </div>

        <div class="help-text">
            <strong>üí° Dicas de Acessibilidade:</strong><br>
            ‚Ä¢ Use Tab e Shift+Tab para navegar entre elementos<br>
            ‚Ä¢ Pressione Enter ou Espa√ßo para ativar bot√µes<br>
            ‚Ä¢ Use as setas do teclado para navegar em listas<br>
            ‚Ä¢ Comandos de voz funcionam em portugu√™s brasileiro<br>
            ‚Ä¢ Todas as fun√ß√µes t√™m atalhos de teclado alternativos
        </div>
    </div>

    <script>
        let isScreenReaderActive = false;
        let isVoiceRecognitionActive = false;
        const outputDisplay = document.getElementById('outputDisplay');
        const commandInput = document.getElementById('commandInput');

        // Simula feedback para comandos
        function executeCommand(command) {
            const messages = {
                'open-menu': 'Menu principal aberto. Use as setas para navegar.',
                'open-file': 'Di√°logo de abertura de arquivo ativado.',
                'switch-window': 'Alternando entre janelas abertas.',
                'minimize': 'Janela minimizada.'
            };
            
            addOutput(`> ${messages[command] || 'Comando executado'}`);
            
            // Simula ativa√ß√£o visual da tecla
            const keys = document.querySelectorAll('.key');
            keys.forEach(key => {
                key.classList.add('active');
                setTimeout(() => key.classList.remove('active'), 300);
            });
        }

        function addOutput(message) {
            outputDisplay.innerHTML += message + '<br>';
            outputDisplay.scrollTop = outputDisplay.scrollHeight;
        }

        function processCommand() {
            const command = commandInput.value.trim().toLowerCase();
            if (command) {
                addOutput(`> Comando recebido: "${command}"`);
                
                // Simula processamento de comandos comuns
                if (command.includes('abrir')) {
                    addOutput('> Abrindo aplicativo...');
                } else if (command.includes('fechar')) {
                    addOutput('> Fechando janela atual...');
                } else if (command.includes('ajuda')) {
                    addOutput('> Comandos dispon√≠veis: abrir, fechar, navegar, ler, digitar');
                } else {
                    addOutput('> Comando n√£o reconhecido. Diga "ajuda" para ver op√ß√µes.');
                }
                
                commandInput.value = '';
            }
        }

        function toggleScreenReader() {
            isScreenReaderActive = !isScreenReaderActive;
            addOutput(`> Leitor de tela ${isScreenReaderActive ? 'ativado' : 'desativado'}`);
        }

        function toggleMagnifier() {
            addOutput('> Lupa virtual ativada. Use Ctrl + roda do mouse para ajustar zoom.');
        }

        function showVirtualKeyboard() {
            addOutput('> Teclado virtual exibido na parte inferior da tela.');
        }

        function toggleEyeTracking() {
            addOutput('> Iniciando calibra√ß√£o do controle por olhar. Siga as instru√ß√µes na tela.');
        }

        // Vari√°veis para reconhecimento de voz real
        let recognition = null;
        let isListening = false;

        // Inicializar Web Speech API
        function initializeSpeechRecognition() {
            if ('webkitSpeechRecognition' in window) {
                recognition = new webkitSpeechRecognition();
            } else if ('SpeechRecognition' in window) {
                recognition = new SpeechRecognition();
            } else {
                addOutput('> ‚ùå Reconhecimento de voz n√£o suportado neste navegador');
                addOutput('> Use Chrome, Edge ou Safari para melhor compatibilidade');
                return false;
            }

            recognition.lang = 'pt-BR';
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;

            recognition.onstart = function() {
                addOutput('> üé§ Microfone ativado - Fale agora!');
                isListening = true;
                updateMicrophoneStatus(true);
            };

            recognition.onend = function() {
                addOutput('> üîá Microfone desativado');
                isListening = false;
                updateMicrophoneStatus(false);
            };

            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript.toLowerCase();
                addOutput(`> üó£Ô∏è Voc√™ disse: "${transcript}"`);
                processVoiceCommand(transcript);
            };

            recognition.onerror = function(event) {
                addOutput(`> ‚ùå Erro no reconhecimento: ${event.error}`);
                if (event.error === 'not-allowed') {
                    addOutput('> ‚ö†Ô∏è Permiss√£o do microfone negada!');
                    addOutput('> Clique no √≠cone do microfone na barra do navegador e permita o acesso');
                }
                isListening = false;
                updateMicrophoneStatus(false);
            };

            return true;
        }

        function startVoiceRecognition() {
            if (!recognition && !initializeSpeechRecognition()) {
                return;
            }

            if (isListening) {
                recognition.stop();
                addOutput('> Parando reconhecimento de voz...');
            } else {
                addOutput('> Iniciando reconhecimento de voz...');
                addOutput('> üì¢ Comandos dispon√≠veis: "abrir navegador", "fechar janela", "ajuda", "parar"');
                try {
                    recognition.start();
                } catch (error) {
                    addOutput('> ‚ùå Erro ao iniciar reconhecimento: ' + error.message);
                }
            }
        }

        function processVoiceCommand(command) {
            // Processamento dos comandos de voz
            if (command.includes('abrir navegador') || command.includes('abrir browser')) {
                addOutput('> üåê Comando executado: Abrindo navegador...');
                executeCommand('open-menu');
            } else if (command.includes('fechar janela') || command.includes('fechar')) {
                addOutput('> ‚ùå Comando executado: Fechando janela...');
                executeCommand('minimize');
            } else if (command.includes('abrir arquivo')) {
                addOutput('> üìÅ Comando executado: Abrindo arquivo...');
                executeCommand('open-file');
            } else if (command.includes('trocar janela') || command.includes('alternar')) {
                addOutput('> üîÑ Comando executado: Trocando janela...');
                executeCommand('switch-window');
            } else if (command.includes('ajuda') || command.includes('help')) {
                addOutput('> üí° Comandos dispon√≠veis:');
                addOutput('  - "Abrir navegador"');
                addOutput('  - "Fechar janela"');
                addOutput('  - "Abrir arquivo"');
                addOutput('  - "Trocar janela"');
                addOutput('  - "Parar" (para desativar o microfone)');
            } else if (command.includes('parar') || command.includes('stop')) {
                recognition.stop();
                addOutput('> üõë Reconhecimento de voz parado por comando');
            } else if (command.includes('teste') || command.includes('test')) {
                addOutput('> ‚úÖ Teste do microfone: FUNCIONANDO!');
                addOutput('> üéâ Seu microfone est√° captando a voz corretamente');
            } else {
                addOutput(`> ‚ùì Comando n√£o reconhecido: "${command}"`);
                addOutput('> Diga "ajuda" para ver comandos dispon√≠veis');
            }
        }

        function updateMicrophoneStatus(active) {
            const indicator = document.querySelector('.voice-indicator');
            const statusText = document.querySelector('.voice-status span');
            
            if (active) {
                indicator.style.background = '#e53e3e';
                indicator.style.animation = 'pulse 0.5s infinite';
                statusText.textContent = 'Microfone: OUVINDO';
            } else {
                indicator.style.background = '#48bb78';
                indicator.style.animation = 'pulse 2s infinite';
                statusText.textContent = 'Sistema de Voz: Ativo';
            }
        }

        // Navega√ß√£o por teclado aprimorada
        document.addEventListener('keydown', function(e) {
            // Feedback visual para teclas pressionadas
            const keyDisplay = document.querySelector('.key-display');
            const pressedKey = document.createElement('span');
            pressedKey.className = 'key active';
            pressedKey.textContent = e.key;
            
            // Atalhos especiais
            if (e.altKey && e.key === 'm') {
                e.preventDefault();
                executeCommand('open-menu');
            } else if (e.ctrlKey && e.key === 'o') {
                e.preventDefault();
                executeCommand('open-file');
            }
            
            // Feedback de tecla pressionada
            addOutput(`> Tecla pressionada: ${e.key}`);
        });

        // Entrada por Enter no campo de comando
        commandInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                processCommand();
            }
        });

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            addOutput('> Interface acess√≠vel carregada com sucesso!');
            
            // Verificar suporte ao reconhecimento de voz
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                addOutput('> ‚úÖ Reconhecimento de voz suportado neste navegador');
                addOutput('> üé§ Clique no bot√£o "üé§ Falar" para testar o microfone');
            } else {
                addOutput('> ‚ùå Reconhecimento de voz n√£o suportado');
                addOutput('> üí° Use Chrome, Edge ou Safari para melhor experi√™ncia');
            }
            
            addOutput('> Todos os recursos de acessibilidade est√£o dispon√≠veis.');
            
            // Foco inicial no primeiro bot√£o
            document.querySelector('.command-btn').focus();
        });
    </script>
</body>
</html>